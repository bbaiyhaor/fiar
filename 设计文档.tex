% !tex encoding = utf8
% !tex program = pdflatex
\documentclass{ctexart}
    \title{网络五子棋设计文档}
    \author{计45 白云仁 2014011419}
    \date{}
\begin{document}
    \maketitle
    \tableofcontents
    \section{实验介绍}
    设计一款简单的网络五子棋软件。
    \section{实验要求}
    要求客户机和服务器建立连接；当双方都按下开始键之后，就可以开始走棋。双方每下完一步棋，就必须发送相关的网络数据给对方，同时更新棋盘，达到同步。之后，就要等待对方下棋，并且准备接收对方发送过来的数据。在下棋过程中，可以申请“退出比赛”，但要对方同意才能退出。
    每一步下棋，都有20秒的倒计时提醒；超时则丧失一次布子机会。赢棋时，需要给出双方分别的总的走棋时间。最终，赢棋方播放喜庆音乐，输棋方播放丧气的音乐。支持“最多连续2步的悔棋”，但是每一次都要征得对方的同意。支持残棋保留现场，可以再次连接时“依据保存时间找到残棋”，并可以“接着下”。使用Tcp 协议实现，并只能使用Qtcpserver和Qtcpsocket两个通信类。
    \section{基本思路}
        \paragraph{单机五子棋(Board)}
        设计一个单机五子棋类，包含五子棋的基本功能，棋盘界面，判断输赢。
        \paragraph{网络五子棋(Fiar)}
        继承单机五子棋，拥用户服务器与客户端，根据玩家的选择设定服务器或客户端。将需要发送到对方的消息通过服务器(或客户端)传递给对方，同时根据服务器(或客户端)传来的消息调用相应的函数及时更新图形界面。
        \paragraph{服务器(Server)}
        设计一个服务器负责向客户端发送消息，接受客户端的消息解析客户端的消息。根据需求发送信号到Fiar对应的槽处理。
        \paragraph{客户端(Client)}
        设计一个客服端负责向服务器发送消息，接受服务器的消息解析服务器的消息，根据需求发送信号到Fiar对应的槽处理。
        \paragraph{服务器套接字(Tcpsocket)}
        服务器开启一个Tcpthread通过Tcpsocket向客户端发送消息。
        \paragraph{线程(Tcpthread)}
        对于新的连接开启一个Tcpthread处理相应的请求。
        \paragraph{注}
        因为只有一个客户端，所以对客户端开启另外的线程处理并没有体现多线程的优势，这里是一开始设计上没有考虑好。通过测试，完全满足实验要求。
    \section{总结}
        通过完成此次大作业，熟悉了Tcp协议，掌握了通过Socket发送消息，对多线程也有进一步的了解，更加熟悉Qt的事件机制。
\end{document}


